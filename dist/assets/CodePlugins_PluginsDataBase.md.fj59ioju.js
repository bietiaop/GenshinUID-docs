import{_ as p}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.CQAzXQdE.js";import{_ as e}from"./chunks/Badge.BLjIphQI.js";import{_ as h,c as t,j as a,a as s,I as i,a4 as k,o as r}from"./chunks/framework.AIsPoTDm.js";import"./chunks/theme.BQQaTOTO.js";const d="/assets/image-20240818182411857.C51d0Xo2.png",v=JSON.parse('{"title":"æ’ä»¶è·å–/è°ƒç”¨/å»ºç«‹æ•°æ®åº“(GsData.db)","description":"","frontmatter":{"author":"Wuyiæ— ç–‘","contributors":["Wuyiæ— ç–‘"]},"headers":[],"relativePath":"CodePlugins/PluginsDataBase.md","filePath":"CodePlugins/PluginsDataBase.md","lastUpdated":1723982835000}'),E={name:"CodePlugins/PluginsDataBase.md"},c={id:"æ’ä»¶è·å–-è°ƒç”¨-å»ºç«‹æ•°æ®åº“-gsdata-db",tabindex:"-1"},g=a("a",{class:"header-anchor",href:"#æ’ä»¶è·å–-è°ƒç”¨-å»ºç«‹æ•°æ®åº“-gsdata-db","aria-label":'Permalink to "æ’ä»¶è·å–/è°ƒç”¨/å»ºç«‹æ•°æ®åº“(GsData.db)<Badge type="tip" text="ç®€å•" />"'},"â€‹",-1),y=k(`<div class="tip custom-block"><p class="custom-block-title">ğŸ’¡ æé†’</p><p>ğŸ’¡<strong>å¼ºçƒˆæ¨è</strong>ä½¿ç”¨è¯¥æ–¹æ³•å»å†™æ•°æ®åº“ï¼ŒåŸºç±»æä¾›äº†å¤§éƒ¨åˆ†è¾ƒä¸ºå¸¸ç”¨çš„æ•°æ®åº“æ–¹æ³•ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</p><p>ç»§æ‰¿å·²ç»å†™å¥½çš„åŸºç±»ï¼Œå¯ä»¥åœ¨è¾ƒå°‘ä»£ç é‡çš„å‰æä¸‹ï¼Œç”Ÿæˆä¸“å±æ’ä»¶çš„è¡¨å¹¶å…±äº«æ‰€æœ‰åŸºç±»æ–¹æ³•</p><p>æœ‰éå¸¸å¤šé¢å¤–çš„æ‰©å±•æ–¹æ³•ï¼ˆå®ç°bot_idç®¡ç†ã€å¤šuidç»‘å®šã€éšæœºè°ƒç”¨CKç­‰ç­‰ï¼‰</p></div><h4 id="ç¬¬ä¸€æ­¥ã€ç»§æ‰¿åŸºç±»-å»ºç«‹è‡ªå·±çš„è¡¨" tabindex="-1">ç¬¬ä¸€æ­¥ã€ç»§æ‰¿åŸºç±»ï¼Œå»ºç«‹è‡ªå·±çš„è¡¨ <a class="header-anchor" href="#ç¬¬ä¸€æ­¥ã€ç»§æ‰¿åŸºç±»-å»ºç«‹è‡ªå·±çš„è¡¨" aria-label="Permalink to &quot;ç¬¬ä¸€æ­¥ã€ç»§æ‰¿åŸºç±»ï¼Œå»ºç«‹è‡ªå·±çš„è¡¨&quot;">â€‹</a></h4><p><a href="https://github.com/KimigaiiWuyi/WzryUID/blob/main/WzryUID/utils/database/models.py" target="_blank" rel="noreferrer">å‚è€ƒ</a></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sqlmodel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gsuid_core.utils.database.base_models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bind, User</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WzryBind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ³¨æ„ï¼Œè¿™é‡Œçš„åˆ—åæ— éœ€æ–°å¢idç­‰åŸºç±»å·²ç»æœ‰çš„åˆ—ï¼Œåªéœ€è¦æ ¹æ®è‡ªå·±å®é™…éœ€æ±‚æ–°å¢åˆ—åå³å¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å…·ä½“åŸºç±»æœ‰ä»€ä¹ˆåˆ—å¯ä»¥ç‚¹è¿›Bindç±»å»æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    uid: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç‹è€…è£è€€UID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WzryUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    uid: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç‹è€…è£è€€UID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="ç¬¬äºŒæ­¥ã€è°ƒç”¨æ–¹æ³•" tabindex="-1">ç¬¬äºŒæ­¥ã€è°ƒç”¨æ–¹æ³• <a class="header-anchor" href="#ç¬¬äºŒæ­¥ã€è°ƒç”¨æ–¹æ³•" aria-label="Permalink to &quot;ç¬¬äºŒæ­¥ã€è°ƒç”¨æ–¹æ³•&quot;">â€‹</a></h4><p><a href="https://github.com/KimigaiiWuyi/WzryUID/blob/main/WzryUID/wzryuid_user/__init__.py" target="_blank" rel="noreferrer">å‚è€ƒ</a></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ..utils.database.models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WzryBind</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ³¨æ„ï¼Œç»§æ‰¿ä¸åŒåŸºç±»çš„è¡¨ï¼Œæ–¹æ³•å¯èƒ½ä¸åŒï¼Œå»ºè®®ä½¿ç”¨VSCæŸ¥çœ‹æ‰€æœ‰æ–¹æ³•ï¼Œä»¥åŠæ‰€æœ‰å…¥å‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # GsCoreå®Œå…¨ä½¿ç”¨TypeHintè¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œå¦‚æœVSCä¸­ä»£ç ç”¨çº¢çº¿æ ‡æ³¨ï¼ŒåŠ¡å¿…æŸ¥çœ‹å‡½æ•°å…¥å‚ï¼Œç¡®ä¿ä¿®æ”¹æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WzryBind.insert_uid(qid, ev.bot_id, uid, ev.group_id)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">asyncio.run(main())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="ç¬¬ä¸‰æ­¥ã€-å¯é€‰-æ˜ å°„æ•°æ®åº“åˆ°ç½‘é¡µæ§åˆ¶å°" tabindex="-1">ç¬¬ä¸‰æ­¥ã€ï¼ˆå¯é€‰ï¼‰æ˜ å°„æ•°æ®åº“åˆ°ç½‘é¡µæ§åˆ¶å° <a class="header-anchor" href="#ç¬¬ä¸‰æ­¥ã€-å¯é€‰-æ˜ å°„æ•°æ®åº“åˆ°ç½‘é¡µæ§åˆ¶å°" aria-label="Permalink to &quot;ç¬¬ä¸‰æ­¥ã€ï¼ˆå¯é€‰ï¼‰æ˜ å°„æ•°æ®åº“åˆ°ç½‘é¡µæ§åˆ¶å°&quot;">â€‹</a></h4><p><a href="https://github.com/KimigaiiWuyi/WzryUID/blob/main/WzryUID/utils/database/models.py" target="_blank" rel="noreferrer">å‚è€ƒ</a></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gsuid_core.webconsole.mount_app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PageSchema, GsAdminModel, site</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ³¨æ„ï¼Œç®¡ç†æ¨¡å‹ã€ä¸€å®šã€‘è¦æºå¸¦@site.register_admin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦åˆ™ã€æ— éœ€ç®¡ç†å‘˜è´¦æˆ·ã€‘ä¹Ÿèƒ½åœ¨ç½‘é¡µæ§åˆ¶å°ä¸­ã€çœ‹åˆ°è¯¥è¡¨å¹¶ä¿®æ”¹ã€‘</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@site.register_admin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WzryBindadmin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GsAdminModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸€å®šè¦ç»§æ‰¿è‡ªGsAdminModel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pk_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;id&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ä¸€èˆ¬æ— éœ€ä¿®æ”¹ï¼Œä»£è¡¨ä¸»é”®æ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #labelè‡ªå®šä¹‰ï¼Œiconå¯å‚è€ƒhttps://fontawesome.com/v4/icons/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page_schema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PageSchema(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç‹è€…ç»‘å®šç®¡ç†&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">icon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fa fa-users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # é…ç½®ç®¡ç†æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WzryBind </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¡«å…¥ç¬¬ä¸€æ­¥ä¸­ç»§æ‰¿çš„æ¨¡å‹å³å¯</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@site.register_admin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WzryUseradmin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GsAdminModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pk_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;id&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page_schema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PageSchema(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç‹è€…CKç®¡ç†&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">icon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fa fa-database&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # é…ç½®ç®¡ç†æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WzryUser</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="é¢å¤–ã€ç»§æ‰¿base-model" tabindex="-1">é¢å¤–ã€ç»§æ‰¿Base_Model <a class="header-anchor" href="#é¢å¤–ã€ç»§æ‰¿base-model" aria-label="Permalink to &quot;é¢å¤–ã€ç»§æ‰¿Base_Model&quot;">â€‹</a></h4><div class="tip custom-block"><p class="custom-block-title">ğŸ’¡ æé†’</p><p>ğŸ’¡åœ¨ä¸Šé¢ä»<code>gsuid_core.utils.database.base_models</code> ç»§æ‰¿åŸºç¡€çš„ <code>Bind</code>, <code>User</code>ï¼Œ<code>Push</code>ï¼Œ<code>Cache</code>è¡¨æ—¶ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸€ä¸å‘½åé£æ ¼ä¸èˆ’æœï¼Œ æ¯”å¦‚ï¼š</p><ul><li>é»˜è®¤ä¼šæœ‰å‡ åˆ—é¢„è®¾çš„åˆ—åï¼Œä¾‹å¦‚<code>uid</code>, <code>cookie</code>ç­‰ç­‰ã€‚</li><li>é»˜è®¤çš„æ–¹æ³•åç§°ä¸º<code>select_data_by_uid</code>ç­‰ç­‰ã€‚</li></ul><p>è¿™æ˜¯ç”±äºé¢„è®¾çš„å››å¤§è¡¨æ˜¯åŸºäºæ¸¸æˆå·¥å…·çš„è§†è§’è®¾è®¡ï¼ŒåŒ…å«äº†å¤§å¤šæ•°æ¸¸æˆå·¥å…·åº”æœ‰çš„åˆ—å’Œæ–¹æ³•ï¼Œä½†å¦‚æœä½ å†™çš„æ’ä»¶å’Œæ¸¸æˆç±»æ— å…³ï¼Œé‚£ä¹ˆè¿™äº›åˆ—å’Œé»˜è®¤æ–¹æ³•å°±ä¼šæ¯”è¾ƒç¢çœ¼ã€‚</p><p>GsCoreå½“ç„¶ä¹Ÿæä¾›äº†æ›´ä¸Šæ¸¸çš„åŸºç±»ä»¥ä¾›ç»§æ‰¿ï¼Œä¸‹é¢æ˜¯å…·ä½“ä»£ç ã€‚</p></div><img src="`+d+`" alt="image-20240818182411857"><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Optional</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sqlmodel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gsuid_core.utils.database.base_models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºç±»æ—¶ä¼ å‚å¸¦ä¸Š\`table=True\`æ‰æ˜¯å»ºè¡¨ï¼Œå¦åˆ™åªæ˜¯Pythonå†…éƒ¨çš„ç±»ç»§æ‰¿ï¼Œä¸ä¼šå®é™…å»ºç«‹è¡¨æ ¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ³¨æ„ï¼Œè¿™é‡Œçš„åˆ—åæ— éœ€æ–°å¢idç­‰åŸºç±»å·²ç»æœ‰çš„åˆ—ï¼Œåªéœ€è¦æ ¹æ®è‡ªå·±å®é™…éœ€æ±‚æ–°å¢åˆ—åå³å¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å…·ä½“åŸºç±»æœ‰ä»€ä¹ˆåˆ—å¯ä»¥ç‚¹è¿›BaseModelç±»å»æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    city: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åŸå¸‚&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç¤ºä¾‹ä¸€ä¸ªç±»æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">classmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_user_city</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cls,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ) -&gt; Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;&#39;&#39;æ ¹æ®ä¼ å…¥\`user_id\`ï¼Œåˆ¤å®šæ˜¯å¦ç»‘å®šåŸå¸‚&#39;&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.select_data(user_id)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.city </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div>`,14);function o(b,m,F,u,A,D){const n=e,l=p;return r(),t("div",null,[a("h1",c,[s("æ’ä»¶è·å–/è°ƒç”¨/å»ºç«‹æ•°æ®åº“(GsData.db)"),i(n,{type:"tip",text:"ç®€å•"}),s(),g]),i(l,{readTime:"3",words:"859"}),y])}const P=h(E,[["render",o]]);export{v as __pageData,P as default};
