import{_ as L,o,c,j as s,t as f,e as P,r as S,n as $,d as V,s as u,h as d,v as W,y as A,a0 as I,P as R,a as b,I as j,a5 as D}from"./framework.AIsPoTDm.js";import{_ as H}from"./Badge.Gth0UqrR.js";const T={props:{controls:Boolean,title:String},data:()=>({tab:"default"}),computed:{mini(){return!this.controls&&!this.title}}},U={class:"controls"},q=s("div",{class:"circle red"},null,-1),J=s("div",{class:"circle yellow"},null,-1),O=s("div",{class:"circle green"},null,-1),Y={class:"title"},Z={key:0,class:"title-text"},F={class:"content"};function K(p,g,e,h,y,_){return o(),c("div",{class:$(["panel-view",{mini:_.mini}])},[s("div",U,[q,J,O,s("div",Y,[e.title?(o(),c("span",Z,f(e.title),1)):P("",!0)])]),s("div",F,[S(p.$slots,"default")])],2)}const ne=L(T,[["render",K]]),Q=["src"],X={class:"nickname"},ee={class:"message-box"},oe=V({__name:"ChatMessage",props:{nickname:{},color:{},avatar:{},tag:{},type:{}},setup(p,{expose:g}){const e=p,h={Alice:"#cc0066",Bob:"#00994d",Carol:"#1e90ff",Dave:"#f4a460",群友A:"#f4a460",干扰用户:"#f4a460"},y={Wuyi无疑:"https://s2.loli.net/2023/10/05/GHjJNWBP4nezgIU.png",GsCore:"https://s2.loli.net/2023/03/25/bareSdYcsmRPOyZ.png"},_={GsCore:"tip",Wuyi无疑:"danger"},w={GsCore:"机器人",Wuyi无疑:"用户"},r=u(!1),k=u(!1),v=u(!1),l=u(),E=d(()=>e.color||h[e.nickname]),C=d(()=>e.avatar||y[e.nickname]),M=d(()=>e.tag||w[e.nickname]),z=d(()=>e.type||_[e.nickname]);function N(){let t;for(const a of document.querySelectorAll(".chat-message")){if(a===l.value)return t;t=a}}W(k,t=>{if(!t)return r.value=!1;const a=N();if(!a||a.getBoundingClientRect().bottom<0)return i();const m=a.__vue__.exposed;m.moving.value||!m.shown.value?m.onappear(i):i()});let x=()=>{};function i(){r.value=!0,v.value=!0,setTimeout(()=>{v.value=!1,x()},100)}function n(){l.value.getBoundingClientRect().top<innerHeight&&(k.value=!0)}const G=D();return g({moving:v,shown:r,onappear(t){x=t}}),A(()=>{l.value.__vue__=G,n(),addEventListener("scroll",n),addEventListener("resize",n)}),I(()=>{removeEventListener("scroll",n),removeEventListener("resize",n)}),(t,a)=>{const B=H;return o(),c("div",{ref_key:"root",ref:l,class:$(["chat-message",{shown:r.value}])},[C.value?(o(),c("img",{key:0,class:"avatar",src:C.value},null,8,Q)):(o(),c("div",{key:1,class:"avatar",style:R({backgroundColor:E.value})},f(t.nickname[0]),5)),s("div",X,[b(f(t.nickname)+" ",1),j(B,{type:z.value,text:M.value},null,8,["type","text"])]),s("div",ee,[S(t.$slots,"default",{},()=>[b(" ")])])],2)}}});export{ne as _,oe as a};
